\documentclass[
  a4paper,
  twocolumn
]{scrartcl}
\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}
\usepackage{ngerman}
\usepackage[autostyle=true,german=quotes]{csquotes}
\usepackage{multirow}
\usepackage{amsmath}
\usepackage{rotating}
\usepackage{booktabs}
\usepackage{xcolor}
\usepackage{lipsum}
\usepackage{listings}
\lstset{
	language=sparql,
    breaklines=true,
    basicstyle=\linespread{0.5}\small\ttfamily,
	commentstyle=\color{gray},
	tabsize=2
} 
\usepackage{geometry}
 \geometry{
 a4paper,
 left=20mm,
 right=20mm,
 top=20mm
 }




\begin{document}

\title{Master Projekt Bericht\\[1em] \large Erweiterung des Projektes Sempala um das Datenformat Singletable}
\author{Manuel Schneider\\schneidm@informatik.uni-freiburg.de}
\maketitle


\section{Einleitung}

\lipsum[1-2]

\section{Grundlagen}

Sempala ist eine SPARQL Implementierung, die auf SQL aufbaut. Für das SQL Backend wird Impala verwendet. Impala ist eine MPP(footnote) SQL Query Engine auf Hadoop. Impala erlaubt es SQL Anfrage nahezu in Echtzeit zu bearbeiten. Sempala übersetzt SPARQL Anfragen in SQL und profitiert daher von der geringen Latenzzeit der Impala anfragen.
Im Ausblick seiner Masterthesis zum „Extended Vertical Partitioning“1 schlägt Simon Skilevic, basierend auf seinen Ideen zum Vertical Partitioning, als Alternative ein weiteres Konzept vor, das auch, wie im ursprünglichen Datenformat „Unified Property Table“ den kompletten Datensatz in einer Tabelle hält. In der Masterthesis wurde das Konzept Bigtable genannt. Um Namenskonflikte zu vermeiden, wird das Konzept hier Singletable genannt.
Die Idee hinter der Singletable basiert darauf, den notwendigen Joins für die Anfragen vorzuarbeiten. Um zu vermeiden, dass für einen Join ein Verbund aus der kompletten Tripel Tabelle mit sich selbst gemacht werden muss, soll die Selektivität erhöht werden, indem für jedes Tripel die Relation zu einem Prädikat gespeichert wird.
Technisch wir die Erhöhung der Selektivität erreicht, indem die Tabelle nach Prädikaten partitioniert wird. Impala beherrscht implizites Partitionieren; dazu muss lediglich die Spalte angeben werden nach der partitioniert wird. Bei einem Join muss n Mit diesem 
Das Konzept der 
 Die Tabelle hält alle RDF Tripel und die Relationen der Tripel zu anderen Tripel
Die Singeltable ist ein Format für die Daten wor
Nun soll das ein anderes Format verwendent werdenformat
Die 
„Cluster“ beschreiben
„Daten“ beschreiben
„Singletable“

\section{Das Datenformat}

\lipsum[1-2]

\section{Implementierung}

\lipsum[1-2]

\subsection{Sempala Loader}

\lipsum[1-2]

\subsection{Sempala Translator}

\lipsum[1-2]

\section{Evaluation}

Die Testumgebung in der die Anfragen ausgeführt wurden besteht aus einem Cluster aus zehn Rechnern.
Alle Rechner besitzen einen Intel Xeon E5-2420 Prozessor, der mit einer Grundfrequenz von 1,9\, GHz taktet und eine maximale TurboBoost-Frequenz\footnote{Die Intel Turbo-Boost-Technik erhöht dynamisch die Frequenz eines Prozessors nach Bedarf, indem die Temperatur- und Leistungsreserven ausgenutzt werden, um bei Bedarf mehr Geschwindigkeit und andernfalls mehr Energieeffizienz zu bieten.} von 2,4\,GHz hat, und zwei 2\,TB Festplatten.
Der Arbeitsspeicher beläuft sich auf 32\,GB.
Verbunden sind die Rechner über eine Gigabit Netzwerkverbindung.
Impala läuft auf Cluster im Rahmen der Cloudera open-source Apache Hadoop Distribution CDH Version 5.7.0, die Hadoop (HDFS) 2.6.0 und  Impala in der Version 2.5.0 liefert. 

%Vergleich welcher Systeme? Referenzen!

Sempala Singletable wurde mit der \textit{Waterloo SPARQL Diversity Test Suite} getestet. Die Test Suite liefert einen Daten- und Anfragen-Generator mit denen die Testdaten und Anfragen generiert wurden. Der Generator erlaubt die ausgegebenen Datenmengen zu skalieren. Die generierten Datensätze enthalten vielfache von etwa 105 Tausend N-Tripel. Für das Testen des Datenformates Singletable wurden Datensätze des Skalieruingsfaktors (von nun an \textit{SF}) 10, 100, 1000 und 10000 verwendet. Umgerechnet sind das in etwa eine Million bis zu einer Milliarde Datensätze.

Vgl der ladezeiten.

\begin{table*}[htbp]
	\centering
	    \caption{Laufzeiten der Erstellung der Datenbanken.}
  	\label{figure:loader:time}
  	\begin{tabular*}{\textwidth}{ @{\extracolsep{\fill}} lrrrr }
		\toprule
		SF & 10 & 100 & 1000 & 10000 \\ 
		\midrule
		ExtVP & 1430\,s & 2418\,s & 9497\,s & 60572\,s \\ 
		Sempala & 26\,s & 56\,s & 333\,s & 2782\,s \\ 
		Singletable & 564\,s & 855\,s & 5179\,s & 67080\,s
  	\end{tabular*}
  	
    \caption{Speicherbedarf der Datenbanken.}
  	\label{figure:loader:space}
  	\begin{tabular*}{\textwidth}{ @{\extracolsep{\fill}} lrrrr }
		\toprule
		SF & 10 & 100 & 1000 & 10000 \\ 
		\midrule
		Original & 49\,MB & 507\,MB & 5,3\,GB & 54,9\,GB \\ 
		ExtVP & 231\,MB & 614\,MB & 6,2\,GB & 63,7\,GB \\ 
		Sempala & 13\,MB & 249\,MB & 3,5\,GB & 40,4\,GB \\ 
		Singletable & 41\,MB & 422\,MB & 4,8\,GB & 68,2\,GB 
  	\end{tabular*}
\end{table*}

Datensatz! Watdiv!

Loadcompare!

\lipsum[1-2]

\subsection{WatDiv Basic}

Die Waterloo SPARQL Diversity Test Suite liefert zwanzig Anfragevorlagen verschiedener Typen. \textit{Linear Queries} sind gerade Pfade im Graph, während \textit{Star Queries} Anfragen sind die der Form eines Sternes gleichen. \textit{Snowflake Queries} sind zwei verbundene Sternanfragen und \textit{Complex Queries} eine Kombination aus allen drei Kategorien. Die verwendeten Anfragevorlagen können in Anhang\,\ref{queries:watdivbasic} eingesehen werden.

Die Anfragen wurden auf den vier Datensätzen mit dem Skalierungsfaktor 10, 100, 1000 und 10000 ausgeführt. Da Sempala ein RDF-auf-SQL System ist, dessen eigentlicher Zweck die Ausführung von SPARQL Anfragen ist, werden die Ergebnisse zur Weiterverarbeitung in einer Ergebnistabelle gespeichert. Um wirklich nur die Laufzeiten zu messen, die das System braucht um die Daten zu erlangen, wird dieser Schritt üblicherweise ausgelassen. Deshalb wurde eine weitere Testreihe für den Skalierungsfaktor 10000 mit einer modifizierten Version von Sempala ausgeführt, die die Ergebnisse zählt anstatt sie zu speichern. Diese Modifikation sorgt dafür, dass die Ergebnisse nach dem letzten Join von jedem Host lokal aggregiert werden und das wesentlich kleinere Ergebnis von nur einem Record an den Koordinatorknoten gesendet wird. Zusätzlich entfällt die zeitaufwändige Festplatten Ein- und Ausgabe die notwendig für das dezentrale Speichern der Ergebnisse ist.

Impala bietet die Möglichkeit durch HDFS Caching Partitionen oder ganze Tabellen zwischenzuspeichern. Somit kann Impala Daten mit der Geschwindigkeit des Speicherbusses lesen\cite{impala}. Zum Vergleich wurden weitere Testläufe ausgeführt, die auf eine Tabelle im Cache zugreifen. Die Testläufe mit einer gecachten Tabelle wurden jeweils mit mit der normalen und der modifizierten Version von Sempala ausgeführt. Die Ergebnisse aller Testläufe mit WatDiv Basic Anfragen sind in Tabelle\,\ref{table:runtime:watdiv:basic} gelistet.

Bei Betrachtung des arithmetischen Mittel aller Anfragen fällt direkt die Dominanz des Extended Vertical Partitioning und der zu der Singletable äquivalenten Implementierung der ExtVP Bigtable ins Auge.


 Laufzeiten aller Systeme und Skalierungsfaktoren 

\begin{table*}[htb!]
	\centering
	\tiny
 	\caption{Laufzeiten und Mittel der WatDiv Basic Anfragen im Vergleich zu ähnlichen Systemen [ms].}
  	\label{table:runtime:watdiv:basic}

	\begin{tabular*}{\textwidth}{ @{\extracolsep{\fill}} llrrrrr|r|rrrrrrr|r }
		\toprule
		 & & L1 & L2 & L3 & L4 & L5 & AM$_L$ & S1 & S2 & S3 & S4 & S5 & S6 & S7 & AM$_S$ \\ 
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF10}}  
		 & Singletable & 591 & 590 & 527 & 534 & 590 & 567 & 1000 & 634 & 618 & 629 & 617 & 582 & 572 & 665 \\ 
		 & Propertytable & 786 & 748 & 642 & 642 & 758 & 715 & 1120 & 822 & 764 & 790 & 866 & 714 & 652 & 818 \\ 
		 & ExtVP Bigtable & 262 & 206 & 157 & 158 & 211 & 199 & 844 & 343 & 364 & 297 & 354 & 248 & 277 & 390 \\ 
		 & ExtVP & 164 & 145 & 97 & 95 & 140 & 128 & 478 & 204 & 180 & 190 & 211 & 138 & 141 & 220 \\ 
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF100}} 
		 & Singletable & 640 & 621 & 570 & 575 & 640 & 609 & 1019 & 730 & 661 & 663 & 668 & 617 & 606 & 709 \\ 
		 & Propertytable & 750 & 748 & 636 & 646 & 748 & 706 & 1340 & 854 & 756 & 844 & 940 & 764 & 754 & 893 \\ 
		 & ExtVP Bigtable & 265 & 219 & 171 & 166 & 203 & 205 & 893 & 355 & 369 & 331 & 379 & 285 & 289 & 414 \\ 
		 & ExtVP & 168 & 193 & 126 & 107 & 173 & 153 & 562 & 216 & 214 & 221 & 193 & 146 & 164 & 245 \\ 
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF1000}} 
		 & Singletable & 947 & 706 & 866 & 697 & 670 & 777 & 1792 & 910 & 919 & 831 & 858 & 886 & 908 & 1015 \\ 
		 & Propertytable & 904 & 746 & 740 & 664 & 752 & 761 & 3130 & 1058 & 862 & 876 & 960 & 848 & 870 & 1229 \\ 
		 & ExtVP Bigtable & 353 & 281 & 292 & 212 & 224 & 272 & 1032 & 454 & 439 & 372 & 429 & 326 & 426 & 497 \\ 
		 & ExtVP & 202 & 196 & 196 & 132 & 162 & 178 & 735 & 294 & 219 & 209 & 199 & 209 & 191 & 294 \\ 
		\midrule
		\multirow{7}{*}{\rotatebox{90}{SF10000}} 
		 & Singletable (CTAS) & 4775 & 2372 & 4346 & 2340 & 1110 & 2989 & 7977 & 4218 & 2945 & 2522 & 2968 & 3735 & 4581 & 4135 \\ 
		 & Singletable (COUNT) & 3207 & 4183 & 7861 & 7307 & 6661 & 5844 & 4552 & 2347 & 3484 & 2329 & 1068 & 6781 & 3996 & 3508 \\ 
		 & Singletable$_C$ (CTAS) & 3614 & 4102 & 7713 & 9692 & 7934 & 6611 & 4384 & 2208 & 4021 & 2359 & 1050 & 7794 & 4156 & 3710 \\ 
		 & Singletable$_C$ (COUNT) & 3173 & 4101 & 7665 & 7303 & 6593 & 5767 & 4409 & 2394 & 3425 & 2364 & 1096 & 6577 & 3982 & 3464 \\ 
		 & Propertytable & 3938 & 2140 & 3630 & 2616 & 1914 & 2848 & 17386 & 5368 & 2816 & 2442 & 3142 & 2260 & 3476 & 5270 \\ 
		 & ExtVP Bigtable & 728 & 661 & 776 & 502 & 364 & 606 & 2169 & 886 & 734 & 564 & 743 & 530 & 812 & 920 \\ 
		 & ExtVP & 471 & 498 & 549 & 209 & 270 & 399 & 2208 & 607 & 311 & 329 & 260 & 235 & 420 & 624
  	\end{tabular*}
  	
  	\begin{tabular*}{\textwidth}{ @{\extracolsep{\fill}} llrrrrr|r|rrr|r|r }
		\midrule
		& Query & F1 & F2 & F3 & F4 & F5 & AM$_F$ & C1 & C2 & C3 & AM$_C$ & AM$_T$ \\ 
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF10}}  
		& Singletable & 742 & 861 & 767 & 941 & 767 & 816 & 912 & 1009 & 828 & 916 & 716 \\ 
		& Propertytable & 866 & 1100 & 1180 & 1172 & 988 & 1061 & 1184 & 1354 & 1066 & 1201 & 911 \\ 
		& ExtVP Bigtable & 642 & 954 & 618 & 985 & 541 & 748 & 1277 & 1332 & 704 & 1104 & 539 \\ 
		& ExtVP & 370 & 451 & 376 & 461 & 334 & 398 & 535 & 472 & 450 & 486 & 282 \\ 
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF100}} 
		& Singletable & 784 & 918 & 804 & 990 & 814 & 862 & 1007 & 1002 & 907 & 972 & 762 \\ 
		& Propertytable & 928 & 1174 & 1150 & 1202 & 1072 & 1105 & 1292 & 1656 & 1702 & 1550 & 998 \\ 
		& ExtVP Bigtable & 696 & 961 & 624 & 1055 & 591 & 785 & 1524 & 1359 & 865 & 1249 & 580 \\ 
		& ExtVP & 393 & 539 & 385 & 579 & 398 & 459 & 577 & 689 & 688 & 651 & 337 \\ 
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF1000}} 
		& Singletable & 1101 & 1220 & 1414 & 1575 & 1436 & 1349 & 1689 & 2435 & 3900 & 2675 & 1288 \\ 
		& Propertytable & 1068 & 1704 & 1538 & 1950 & 2545 & 1761 & 2828 & 5992 & 6040 & 4953 & 1804 \\ 
		& ExtVP Bigtable & 791 & 1114 & 854 & 1202 & 870 & 966 & 1655 & 1620 & 2322 & 1866 & 763 \\ 
		& ExtVP & 433 & 642 & 638 & 692 & 672 & 615 & 923 & 1460 & 2929 & 1771 & 567 \\ 
		\midrule
		\multirow{7}{*}{\rotatebox{90}{SF10000}} 
		& Singletable (CTAS) & 3569 & 4043 & 8306 & 10184 & 8331 & 6887 & 4247 & 16770 & 7899 & 9639 & 5362 \\ 
		& Singletable (COUNT) & 2975 & 2243 & 3004 & 3252 & 3796 & 3054 & 4345 & 15567 & 5460 & 8457 & 4721 \\ 
		& Singletable$_C$ (CTAS) & 2875 & 2503 & 2858 & 3741 & 4202 & 3236 & 4753 & 16212 & 8458 & 9808 & 5231 \\ 
		& Singletable$_C$ (COUNT) & 2972 & 2197 & 2950 & 3167 & 3779 & 3013 & 4223 & 15896 & 5451 & 8523 & 4686 \\ 
		& Propertytable & 4420 & 9316 & 12090 & 11668 & 19516 & 11402 & 23136 & 39710 & 37462 & 33436 & 11676 \\ 
		& ExtVP Bigtable & 1206 & 1619 & 2247 & 1936 & 2512 & 1904 & 3224 & 3410 & 12477 & 6370 & 1905 \\ 
		& ExtVP & 590 & 1226 & 1969 & 1265 & 2254 & 1461 & 2508 & 2740 & 16407 & 7218 & 1766 \\ 
		 \bottomrule
  	\end{tabular*}
 
\end{table*}

Bei kleinen daten überwiegt der Overhead		
erst ab SF 1000 wird datengröße relevant		
cache checken stats		
select ohne CTAS		Nur 1000

\lipsum[1-2]

\paragraph{WatDiv Basic \enquote{CTAS} Queries}

\lipsum[1-2]

\paragraph{WatDiv Basic \enquote{COUNT} Queries}

\lipsum[1-2]

\paragraph{WatDiv Basic gecachte \enquote{CTAS} Queries}

\lipsum[1-2]

\paragraph{WatDiv Basic gecachte \enquote{COUNT} Queries}

\lipsum[1-2]
\lipsum[1-2]

\subsubsection{WatDiv Increasing Linear}

\lipsum[1-2]
\lipsum[1-2]

\begin{sidewaystable*}[htbp]
	\centering
	\scriptsize
    \caption{Laufzeiten und Mittel der WatDiv IL Anfragen der Pfadlängen 5 bis 10 [ms].}
  	\label{table:runtime:watdiv:il}
  	\begin{tabular*}{\textwidth}{ @{\extracolsep{\fill}} llrrrrrr|r|rrrrrr|r }
		\toprule
		&  & IL-1-5 & IL-1-6 & IL-1-7 & IL-1-8 & IL-1-9 & IL-1-10 & AM$_{\text{IL-1}}$ & IL-2-5 & IL-2-6 & IL-2-7 & IL-2-8 & IL-2-9 & IL-2-10 & AM$_{\text{IL-2}}$ \\ 
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF10}}  
		& Singletable & 2953 & 4067 & 4709 & 2417 & 2199 & 2312 & 3110 & 1493 & 1723 & 1698 & 1798 & 1845 & 1901 & 1743 \\ 
		& PropertyTable & 1123 & 1064 & 1174 & 1291 & 1361 & 1444 & 1243 & 1054 & 1050 & 1062 & 1079 & 1081 & 1191 & 1086 \\ 
		& ExtVP Bigtable & 543 & 628 & 759 & 888 & 995 & 1420 & 872 & 556 & 591 & 702 & 839 & 969 & 1171 & 805 \\ 
		& ExtVP & 307 & 360 & 390 & 493 & 503 & 701 & 459 & 453 & 334 & 388 & 466 & 495 & 660 & 466 \\ 
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF100}} 
		& Singletable & 2953 & 4067 & 4709 & 2417 & 2199 & 2312 & 3110 & 1493 & 1723 & 1698 & 1798 & 1845 & 1901 & 1743 \\ 
		& PropertyTable & 3643 & 3753 & 3844 & 3919 & 4042 & 4126 & 3888 & 2164 & 2257 & 2290 & 2450 & 2527 & 2644 & 2389 \\ 
		& ExtVP Bigtable & 845 & 928 & 1126 & 1275 & 1443 & 1804 & 1237 & 1317 & 947 & 1093 & 1198 & 1390 & 1715 & 1276 \\ 
		& ExtVP & 558 & 604 & 711 & 834 & 875 & 1299 & 814 & 969 & 594 & 654 & 795 & 911 & 1047 & 828 \\ 
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF1000}} 
		& Singletable & 14118 & 18865 & 22838 & 11773 & 10596 & 10654 & 14807 & 10913 & 8888 & 8755 & 8499 & 8974 & 8849 & 9146 \\ 
		& PropertyTable & 29321 & 29684 & 29595 & 29696 & 29658 & 29663 & 29603 & 19357 & 19388 & 19496 & 19867 & 20162 & 20152 & 19737 \\ 
		& ExtVP Bigtable & 2571 & 2308 & 2640 & 2827 & 3057 & 3293 & 2783 & 6034 & 3041 & 3006 & 3386 & 3845 & 3807 & 3853 \\ 
		& ExtVP & 1724 & 1745 & 1965 & 2029 & 2185 & 2643 & 2048 & 4944 & 1869 & 1980 & 2114 & 2382 & 2413 & 2617 \\ 
		\midrule
		\multirow{7}{*}{\rotatebox{90}{SF10000}} 
		& Singletable (CTAS) & 235865 & 148567 & 178891 & 148158 & 144950 & 176364 & 172133 & 59607 & 125678 & 84605 & 75862 & 113046 & 111570 & 95061 \\ 
		& Singletable (COUNT) & 212930 & 125441 & 161425 & 154996 & 130530 & 150831 & 156025 & 45675 & 87538 & 73453 & 69693 & 79123 & 82707 & 73031 \\ 
		& Singletable$_C$ (CTAS) & 172769 & 123045 & 142636 & 115680 & 110874 & 114760 & 129961 & 49887 & 98169 & 65767 & 63897 & 79569 & 74608 & 71983 \\ 
		& Singletable$_C$ (COUNT) & 193029 & 110812 & 139216 & 121499 & 118094 & 121926 & 134096 & 43566 & 79733 & 71752 & 65806 & 72256 & 75662 & 68129 \\ 
		& PropertyTable & 128486 & 131304 & 152730 & 152169 & 153360 & 154272 & 145387 & 61843 & 63501 & 64487 & 76717 & 97933 & 96590 & 76845 \\ 
		& ExtVP Bigtable & 21273 & 16238 & 19872 & 22364 & 24376 & 22195 & 21053 & 57251 & 25835 & 26848 & 28188 & 30787 & 29562 & 33078 \\ 
		& ExtVP & 12543 & 12252 & 15062 & 15003 & 15478 & 16124 & 14410 & 41188 & 13276 & 14182 & 15261 & 16313 & 13922 & 19024
  	\end{tabular*}

  	\begin{tabular*}{\textwidth}{ @{\extracolsep{\fill}} llrrrrr|r|rrrrrrr }
		\midrule
	  	& & IL-3-5 & IL-3-6 & IL-3-7 & IL-3-8 & IL-3-9 & IL-3-10 & AM$_{\text{IL-3}}$ & AM-5 & AM-6 & AM-7 & AM-8 & AM-9 & AM-10  \\ 
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF10}}  
		& Singletable & 9574 & 12239 & 4262 & 67246 & 4539 & 4942 & 17134 & 4673 & 6009 & 3556 & 23820 & 2861 & 3052 \\
		& PropertyTable & 2624 & 3155 & 1882 & 12548 & 3454 & 3620 & 4547 & 1600 & 1757 & 1373 & 4973 & 1965 & 2085 \\
		& ExtVP Bigtable & 558 & 1020 & 937 & 7907 & 1390 & 1594 & 2234 & 552 & 746 & 799 & 3211 & 1118 & 1395 \\
		& ExtVP & 382 & 783 & 732 & 10698 & 1118 & 1241 & 2492 & 381 & 492 & 503 & 3885 & 705 & 868 \\
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF100}} 
		& Singletable & 96188 & 125219 & 22903 & 714894 & 37645 & 41267 & 173019 & 33545 & 43669 & 9770 & 239703 & 13896 & 15160 \\
		& PropertyTable & 19214 & 26118 & 11818 & 111690 & 26654 & 28562 & 37343 & 8340 & 10709 & 5984 & 39353 & 11074 & 15092 \\
		& ExtVP Bigtable & 1215 & 2893 & 1904 & 24739 & 3238 & 3473 & 6244 & 1126 & 1589 & 1374 & 9071 & 2024 & 2330 \\
		& ExtVP & 855 & 2766 & 1978 & 36443 & 3608 & 3244 & 8149 & 794 & 1322 & 1114 & 12691 & 1798 & 1863 \\
		\midrule
		\multirow{4}{*}{\rotatebox{90}{SF1000}} 
		& Singletable & 479772 & 620307 & 107386 & 3583029 & 213286 & 230228 & 872335 & 168268 & 216020 & 46326 & 1201100 & 77619 & 83243 \\
		& PropertyTable & 155298 & 194758 & 93424 & 878232 & 217636 & 231430 & 295130 & 67992 & 81277 & 47505 & 309265 & 89152 & 93748 \\
		& ExtVP Bigtable & 4509 & 12225 & 6855 & 108537 & 10335 & 10360 & 25470 & 4371 & 5858 & 4167 & 38250 & 5746 & 5820 \\
		& ExtVP & 4474 & 12188 & 8552 & 178514 & 13411 & 13405 & 38424 & 3714 & 5267 & 4166 & 60886 & 5993 & 6154 \\
		\midrule
		\multirow{7}{*}{\rotatebox{90}{SF10000}} 
		& Singletable (CTAS) & 2167746 & 2854454 & 761754 & 42602898 & 2997969 & 3178982 & 9093967 & 821073 & 1042900 & 341750 & 14275639 & 1085322 & 1155639 \\
		& Singletable (COUNT) & 252653 & 144565 & 104940 & 728210 & 202999 & 208068 & 273573 & 170419 & 119181 & 113273 & 317633 & 137551 & 147202 \\
		& Singletable$_C$ (CTAS) & 2141407 & 2427551 & 669212 & 42454373 & 3006077 & 3221576 & 8986699 & 788021 & 882921 & 292538 & 14211317 & 1065507 & 1136981 \\
		& Singletable$_C$ (COUNT) & 224795 & 125154 & 89350 & 733727 & 196108 & 205548 & 262447 & 153797 & 105233 & 100106 & 307011 & 128819 & 134379 \\
		& PropertyTable & 493016 & 595152 & 365868 & 5649620 & 2026680 & 2462137 & 1932079 & 227782 & 263319 & 194362 & 1959502 & 759324 & 904333 \\
		& ExtVP Bigtable & 33370 & 85228 & 64061 & 1656994 & 130310 & 99129 & 344849 & 37298 & 42434 & 36927 & 569182 & 61824 & 50295 \\
		& ExtVP & 29590 & 87525 & 102971 & 2068100 & 158595 & 141940 & 431454 & 27774 & 37684 & 44072 & 699454 & 63462 & 57329 \\	
		\bottomrule  	
  	\end{tabular*}
\end{sidewaystable*}


\lipsum[1-2]

\lipsum[1-2]

\paragraph{WatDiv IL \enquote{CTAS} Queries}

\lipsum[1-2]

\paragraph{WatDiv IL \enquote{COUNT} Queries}

\lipsum[1-2]

\paragraph{WatDiv IL gecachte \enquote{CTAS} Queries}

\lipsum[1-2]

\paragraph{WatDiv IL gecachte \enquote{COUNT} Queries}

\lipsum[1-2]

\subsubsection{Testumgebung}

\lipsum[1-2]

\section{Fazit}

Hat sich caching gelocht? naja kernel cache macht schon einiges

For queries involving smaller amounts of data, or in single-user workloads, you might not notice a significant difference in query response time with or without HDFS caching. Even with HDFS caching turned off, the data for the query might still be in the Linux OS buffer cache. The benefits become clearer as data volume increases, and especially as the system processes more concurrent queries. HDFS caching improves the scalability of the overall system. That is, it prevents query performance from declining when the workload outstrips the capacity of the Linux OS cache.

Impala automatically reads from memory any data that has been designated as cached and actually loaded into the HDFS cache. (It could take some time after the initial request to fully populate the cache for a table with large size or many partitions.) The speedup comes from two aspects: reading from RAM instead of disk, and accessing the data straight from the cache area instead of copying from one RAM area to another. This second aspect yields further performance improvement over the standard OS caching mechanism, which still results in memory-to-memory copying of cached data.
For small amounts of data, the query speedup might not be noticeable in terms of wall clock time. The performance might be roughly the same with HDFS caching turned on or off, due to recently used data being held in the Linux OS cache. The difference is more pronounced with:
Data volumes (for all queries running concurrently) that exceed the size of the Linux OS cache.
A busy cluster running many concurrent queries, where the reduction in memory-to-memory copying and overall memory usage during queries results in greater scalability and throughput.
Thus, to really exercise and benchmark this feature in a development environment, you might need to simulate realistic workloads and concurrent queries that match your production environment.
One way to simulate a heavy workload on a lightly loaded system is to flush the OS buffer cache (on each data node) between iterations of queries against the same tables or partitions:



\bibliographystyle{plain}
\bibliography{bibliography}

\clearpage
\appendix   
\input{section_watdiv_basic.tex}
\newpage
\input{section_watdiv_il.tex}
\nocite{*}
\end{document}




